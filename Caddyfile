{
        debug
        log {
                output stdout
                format console
                level INFO
        }
}

funduck.ddns.net {
        tls {$EMAIL}
        encode zstd gzip

        handle /api* {
                reverse_proxy api:{$API_PORT} {
                        header_up Host {http.request.host}
                        header_up X-Real-IP {http.request.remote}
                        header_up X-Forwarded-For {http.request.remote}
                }
        }

        # Serve static files directly
        handle /* {
                root * /mini-app/docs/
                file_server
        }
}
