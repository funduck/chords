{
        debug
        log {
                output stdout
                format console
                level info
        }
        http_port 8080
}

:8080 {
        tls some@gmail.com
        encode zstd gzip

        handle /api* {
                reverse_proxy localhost:9000 {
                        header_up Host {http.request.host}
                        header_up X-Real-IP {http.request.remote}
                        header_up X-Forwarded-For {http.request.remote}
                }
        }

        handle /log {
			reverse_proxy localhost:9000 {
				header_up Host {http.request.host}
				header_up X-Real-IP {http.request.remote}
				header_up X-Forwarded-For {http.request.remote}
			}
		}

        # Serve static files and handle React Router
        handle /* {
			reverse_proxy localhost:8081 {
				header_up Host {http.request.host}
				header_up X-Real-IP {http.request.remote}
				header_up X-Forwarded-For {http.request.remote}
			}
        }
}
